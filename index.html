<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Orden de Retiro / Encuesta de Devoluci√≥n de Equipo</title>
<style>
:root{
  --line:#1e293b;
  --muted:#334155;
  --bg:#ffffff;
  --accent:#0f172a;
}

*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  font-family: "Segoe UI", Roboto, Arial, sans-serif;
  background:#f6f7fb;
  color:#0b0f19;
  padding: 12px;
  line-height:1.5;
}

/* üìå Contenedor principal */
.sheet{
  max-width: 900px;
  margin: 18px auto;
  background: var(--bg);
  border: 2px solid var(--line);
  border-radius: 10px;
  box-shadow: 0 8px 24px rgba(2,6,23,.1);
  padding: 20px;
}

/* üìå Encabezado */
header{
  display:grid;
  grid-template-columns: 1fr auto;
  align-items:center;
  gap:16px;
  padding:12px 16px;
  border:2px solid var(--line);
  border-radius:8px;
}
header h1{
  margin:0;
  font-size: 22px;
  font-weight: 700;
  letter-spacing:.5px;
  text-transform: uppercase;
  color: var(--accent);
}
.badge{
  font-size:13px;
  font-weight:500;
  color:#475569;
  margin-top:4px;
}
.logo{
  width:82px;height:82px;
  border:2px solid var(--line);
  display:grid;place-items:center;
  border-radius:6px;
  overflow:hidden;
}
.logo img{
  width:100%;
  height:100%;
  object-fit:contain;
}

/* üìå Bloques */
.block{
  border:2px solid var(--line);
  margin-top:22px;
  border-radius:8px;
  overflow:hidden;
}
.block .title{
  background:#eef2ff;
  border-bottom:2px solid var(--line);
  padding:10px 14px;
  font-weight:700;
  text-transform:uppercase;
  letter-spacing:.4px;
  font-size:14px;
  color: var(--accent);
}
.block .content{
  padding:14px 16px;
}

/* üìå Grillas */
.grid-2{display:grid; grid-template-columns: 1fr 1fr; gap:14px}
.grid-3{display:grid; grid-template-columns: repeat(3, minmax(0,1fr)); gap:14px}
.grid-4{display:grid; grid-template-columns: repeat(4, minmax(0,1fr)); gap:14px}

/* üìå Inputs */
label{
  font-size:13px;
  text-transform:uppercase;
  letter-spacing:.4px;
  color:var(--muted);
  display:block;
  margin-bottom:6px;
  font-weight:600;
}
input[type="text"],
input[type="date"],
input[type="tel"],
input[type="number"],
input[type="email"],
select,
textarea{
  width:100%;
  max-width:100%;
  padding:10px 12px;
  border:2px solid var(--line);
  border-radius:6px;
  font-size:15px;
  outline:none;
  background:#fff;
  transition:border-color .2s, box-shadow .2s;
}
textarea{min-height:100px; resize:vertical}

/* üö® Validaci√≥n visual */
input:invalid, select:invalid, textarea:invalid{
  border-color:#dc2626;
}
input:focus, select:focus, textarea:focus{
  border-color:var(--accent);
  box-shadow:0 0 0 2px rgba(15,23,42,.2);
}

/* üìå Checklines */
.checkline{
  display:grid;
  grid-template-columns: 1.3fr repeat(2,.7fr);
  gap:12px; 
  align-items:center;
  border-bottom:1px dashed #cbd5e1; 
  padding:10px 0;
}
.checkline:last-child{border-bottom:none}
.checkline > label {
  font-weight: 700;
  font-size: 14px;
  color: var(--accent);
}
.checkgroup{
  display:flex; gap:6px; align-items:center;
  justify-content:flex-start;
  font-size:14px;
}
.checkgroup input{transform:translateY(1px)}

/* üìå Nota */
.notice{
  font-size:12px;color:#64748b;margin-top:6px
}

/* üìå Acciones */
.actions{
  display:flex; gap:12px; justify-content:flex-end; margin-top:22px
}
button{
  border:2px solid var(--accent);
  background:var(--accent);
  color:#fff;
  padding:12px 18px;
  border-radius:8px;
  font-weight:600;
  cursor:pointer;
  font-size:15px;
  transition:all .2s;
  box-shadow:0 3px 6px rgba(0,0,0,.12);
}
button.secondary{
  background:#fff;color:var(--accent);
}
button:hover{opacity:.9; transform:translateY(-1px)}

/* üìå Firma */
.block.signature {
  display: flex;
  flex-direction: column;
  align-items: center;
  padding: 16px;
}
#firmaVendedor {
  width: 100%;
  max-width: 520px; 
  height: 150px; 
  border: 2px solid var(--line);
  border-radius: 6px;
  background-color: #fff;
  margin-bottom: 12px;
}
.block.signature button {
  padding: 10px 20px;
  font-size: 14px;
  border-radius: 6px;
  border: 2px solid var(--accent);
  background: var(--accent);
  color: #fff;
  cursor: pointer;
  transition: opacity 0.2s, transform 0.2s;
}
.block.signature button:hover {
  opacity: 0.9;
  transform:translateY(-1px);
}

/* üìå Responsive */
@media (max-width: 768px) {
  .grid-2,
  .grid-3,
  .grid-4 {
    grid-template-columns: 1fr !important;
  }

  header {
    grid-template-columns: 1fr;
    text-align: center;
  }
  .logo {margin: 12px auto 0;}

  .actions {flex-direction: column;}
  .actions button {width: 100%;}

  .checkline {
    grid-template-columns: 1fr !important;
    text-align: center;
    padding:10px 0;
  }
  .checkline > label {margin-bottom:8px;}
  .checkgroup {
    justify-content:center;
    margin-bottom:4px;
  }

  input[type="date"] {
    width: 100% !important;
    max-width: 100% !important;
    font-size: 15px;
  }

  #firmaVendedor {
    max-width: 100%;
    height: 200px;
  }
  .block.signature button {width: 100%;}
}

/* üìå Impresi√≥n */
@media print{
  body{background:#fff}
  .sheet{box-shadow:none; margin:0; border-radius:0; border-width:1px}
  .actions{display:none}
  a[href]:after{content:""}
}


</style>
</head>
<body>
<form class="sheet" id="formRetiro" autocomplete="on">
<header>
  <div>
    <h1>Orden de Retiro de Activo Promocional</h1>
    <div class="badge">Encuesta / Acta de Devoluci√≥n</div>
  </div>
  <div class="logo">
    <img src="maravilla.png" alt="Logo Empresa">
  </div>
</header>

<div class="block">
  <div class="title">Correo de destino</div>
  <div class="content">
    <label for="correoDestino">Ingrese el correo al que quiere enviar</label>
    <input id="correoDestino" name="correoDestino" type="email" required placeholder="ejemplo@correo.com">
  </div>
</div>

<div class="block">
  <div class="title">Motivo y fecha</div>
  <div class="content grid-3">
    <div>
      <label for="motivo">Motivo del retiro</label>
      <select id="motivo" name="motivo" required>
        <option value="" hidden>Seleccione‚Ä¶</option>
        <option>Baja Rotacion</option>
        <option>Negocio Cerrado</option>
        <option>Cliente Insatisfecho</option>
        <option>Falla de Congelador</option>
        <option>Otro</option>
      </select>
    </div>
    <div>
      <label for="lugar">Lugar</label>
      <input id="lugar" name="lugar" type="text" placeholder="Ciudad / Municipio" required>
    </div>
    <div>
      <label for="fecha">Fecha</label>
      <input id="fecha" name="fecha" type="date" required>
    </div>
  </div>
</div>

<div class="block">
  <div class="title">Informaci√≥n del negocio</div>
  <div class="content">
    <div class="grid-4">
      <div>
        <label for="region">Regi√≥n BNC</label>
        <input id="region" name="region" type="text" placeholder="CENTRO">
      </div>
      <div>
        <label for="codigoBNC">C√≥digo BNC</label>
        <input id="telProp" name="codigoBNC" type="tel">
      </div>
      <div>
        <label for="agencia">Agencia BNC</label>
        <input id="agencia" name="agencia" type="text" placeholder="CENTRO">
      </div>
      <div>
        <label for="distrito">Ruta</label>
        <input id="distrito" name="distrito" type="text">
      </div>
    </div>
    <div class="grid-2" style="margin-top:10px">
      <div>
        <label for="negocio">Nombre del negocio</label>
        <input id="negocio" name="negocio" type="text" required>
      </div>
      <div>
        <label for="direccion">Direcci√≥n del negocio</label>
        <input id="direccion" name="direccion" type="text" placeholder="Calle, avenida, zona, municipio" required>
      </div>
    </div>
  </div>
</div>

<div class="block">
  <div class="title">Informaci√≥n del propietario del negocio</div>
  <div class="content grid-3">
    <div>
      <label for="propietario">Nombre del propietario</label>
      <input id="propietario" name="propietario" type="text" required>
    </div>
    <div>
      <label for="encargado">Nombre del encargado</label>
      <input id="encargado" name="encargado" type="text">
    </div>
    <div>
      <label for="telProp">Tel√©fono</label>
      <input id="telProp" name="telProp" type="tel" placeholder="####-####">
    </div>
  </div>
</div>

<div class="block">
  <div class="title">Caracter√≠sticas del equipo fr√≠o</div>
  <div class="content grid-4">
    <div>
      <label for="modelo">Modelo</label>
      <input id="modelo" name="modelo" type="text" placeholder="Nevera sombrilla">
    </div>
    <div>
      <label for="serie">Serie</label>
      <input id="telSup" name="serie" type="tel">
    </div>
    <div>
      <label for="sombrilla"># de Equipo</label>
      <input id="sombrilla" name="sombrilla" type="text">
    </div>
    <div>
      <label for="vendedor">Nombre vendedor</label>
      <input id="vendedor" name="vendedor" type="text">
    </div>
    <div>
      <label for="telVend">Tel√©fono vendedor</label>
      <input id="telVend" name="telVend" type="tel" placeholder="####-####">
    </div>
    <div>
      <label for="supervisor">Nombre supervisor</label>
      <input id="supervisor" name="supervisor" type="text">
    </div>
    <div>
      <label for="telSup">Tel√©fono supervisor</label>
      <input id="telSup" name="telSup" type="tel" placeholder="####-####">
    </div>
  </div>
</div>

<div class="block">
  <div class="title">Estado de la devoluci√≥n del equipo</div>
  <div class="content">
    <div class="checkline">
      <label>Imagen / Rotulaci√≥n</label>
      <div class="checkgroup">
        <input type="radio" id="img-b" name="imagen" value="buen" required>
        <label for="img-b">Buen estado</label>
      </div>
      <div class="checkgroup">
        <input type="radio" id="img-m" name="imagen" value="mal">
        <label for="img-m">Mal estado</label>
      </div>
    </div>
    <div class="checkline">
      <label>Canastas</label>
      <div class="checkgroup">
        <input type="radio" id="can-c" name="canastas" value="completas" required>
        <label for="can-c">Completas</label>
      </div>
      <div class="checkgroup">
        <input type="radio" id="can-nc" name="canastas" value="no-completas">
        <label for="can-nc">No completas</label>
      </div>
    </div>
    <div class="checkline">
      <label>Rodos</label>
      <div class="checkgroup">
        <input type="radio" id="rod-b" name="rodos" value="buen" required>
        <label for="rod-b">Buen estado</label>
      </div>
      <div class="checkgroup">
        <input type="radio" id="rod-m" name="rodos" value="mal">
        <label for="rod-m">Mal estado</label>
      </div>
    </div>
    <div class="checkline">
      <label>Puertas</label>
      <div class="checkgroup">
        <input type="radio" id="pue-b" name="puertas" value="buen" required>
        <label for="pue-b">Buen estado</label>
      </div>
      <div class="checkgroup">
        <input type="radio" id="pue-m" name="puertas" value="mal">
        <label for="pue-m">Mal estado</label>
      </div>
    </div>
    <div class="checkline">
      <label>Burrito de comunicaci√≥n</label>
      <div class="checkgroup">
        <input type="radio" id="bur-s" name="burrito" value="si" required>
        <label for="bur-s">S√≠</label>
      </div>
      <div class="checkgroup">
        <input type="radio" id="bur-n" name="burrito" value="no">
        <label for="bur-n">No</label>
      </div>
    </div>
    <div class="checkline">
      <label>Devoluci√≥n de llaves</label>
      <div class="checkgroup">
        <input type="radio" id="llav-s" name="llaves" value="si" required>
        <label for="llav-s">S√≠</label>
      </div>
      <div class="checkgroup">
        <input type="radio" id="llav-n" name="llaves" value="no">
        <label for="llav-n">No</label>
      </div>
    </div>
  </div>
</div>

<div class="block">
  <div class="title">Observaciones</div>
  <div class="content">
    <textarea id="obs" name="observaciones" placeholder="Ej.: Tiene baja rotaci√≥n de helados, detalles est√©ticos, etc."></textarea>
  </div>
</div>

<div class="block">
  <div class="title">Firma del vendedor</div>
  <div class="content">
    <canvas id="firmaVendedor" class="signature-pad"></canvas>
    <button type="button" onclick="signaturePad.clear()">Borrar</button>
    <input type="hidden" name="firmaVendedor" id="firmaVendedorHidden">
  </div>
</div>

<div class="actions">
  <button type="button" class="secondary" onclick="window.print()">Imprimir / PDF</button>
  <button type="submit">Enviar encuesta</button>
</div>
</form>

<script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/signature_pad@4.1.7/dist/signature_pad.umd.min.js"></script>
<script>
  emailjs.init("9YrgwNAKm8ppHJDLZ");

  const canvas = document.getElementById("firmaVendedor");
  const signaturePad = new SignaturePad(canvas);

  function resizeCanvas() {
    const ratio = Math.max(window.devicePixelRatio || 1, 1);
    canvas.width = canvas.offsetWidth * ratio;
    canvas.height = canvas.offsetHeight * ratio;
    canvas.getContext("2d").scale(ratio, ratio);
    signaturePad.clear();
  }
  window.addEventListener("resize", resizeCanvas);
  resizeCanvas();

  document.getElementById("formRetiro").addEventListener("submit", function(event) {
    event.preventDefault();

    if (signaturePad.isEmpty()) {
      alert("Por favor, dibuje la firma antes de enviar.");
      return;
    }

    // üîë Guardar firma en base64 dentro del input hidden
    document.getElementById("firmaVendedorHidden").value = signaturePad.toDataURL();

    // üîë Enviar formulario con EmailJS
    emailjs.sendForm("service_5wz8ct2", "template_y4a3bvp", this)
      .then(() => {
        alert("‚úÖ Encuesta enviada correctamente.");
        this.reset();
        signaturePad.clear();
      }, (err) => {
        alert("‚ùå Error al enviar: " + JSON.stringify(err));
      });
  });
</script>
</body>
</html>